<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nepal Heritages — GoNepal</title>
  <meta name="description" content="Explore Nepal's heritage sites: Patan Durbar Square, Bhaktapur, Swayambhunath and Pashupatinath — ticketing, map, live weather and directions." />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="heritages.css">
</head>
<body>

  <a href="gonepal.html" class="back-btn" aria-label="Go back to Home">← Go Back</a>

  <div id="loginPopup" class="popup-bg" aria-hidden="true">
    <div class="popup-box" role="dialog" aria-modal="true" aria-labelledby="loginTitle">
      <h3 id="loginTitle">Please sign in</h3>
      <p>Sign in to view and book heritage site tickets.</p>
      <button class="popup-btn" onclick="redirectToLogin()">Sign in</button>
    </div>
  </div>

  <section class="hero container">
    <h1>Nepal Heritages</h1>
    <p>Discover and book tickets for Nepal's most treasured heritage sites — live weather, interactive map and easy directions included.</p>
  </section>

  <main class="section" id="explore">
    <h2 style="color:var(--primary-700)">Explore Sites</h2>
    <p class="small">Click a card to open details, view the map, check weather and buy tickets.</p>

    <div class="grid reveal" id="cards">
      <div class="card" data-id="patan">
        <img src="patan.jpg" alt="Patan Durbar Square">
        <h3>Patan Durbar Square</h3>
        <p>Newar architecture, Krishna Mandir and Patan Museum.</p>
      </div>

      <div class="card" data-id="bhaktapur">
        <img src="bds.webp" alt="Bhaktapur Durbar Square">
        <h3>Bhaktapur Durbar Square</h3>
        <p>Medieval city, pottery square and 55‑Window Palace.</p>
      </div>

      <div class="card" data-id="swayambhunath">
        <img src="swayambhunath.jpg" alt="Swayambhunath Stupa">
        <h3>Swayambhunath Stupa</h3>
        <p>Monkey Temple with panoramic valley views.</p>
      </div>

      <div class="card" data-id="pashupatinath">
        <img src="pashupatinath.jpg" alt="Pashupatinath Temple">
        <h3>Pashupatinath Temple</h3>
        <p>Holiest Hindu temple, ghats and rituals.</p>
      </div>
    </div>

    <!-- unified detail panel -->
    <section class="detail reveal" id="detailPanel" aria-live="polite">
      <div class="detail-header">
        <h2 id="detailTitle">Heritage</h2>
        <div style="display:flex;gap:10px;align-items:center">
          <button class="btn btn-ghost" id="backBtn">← Back</button>
          <div class="small" id="shortDesc">Overview</div>
        </div>
      </div>

      <div class="detail-grid" style="margin-top:16px">
        <div>
          <div class="detail-hero">
            <div class="slideshow" id="slideshowContainer"></div>
          </div>

          <div style="margin-top:16px" id="longDescContainer">
            <p id="longDesc" style="color:var(--muted)"></p>
          </div>

          <div style="margin-top:18px" class="booking">
            <h4>Book Tickets</h4>
            <div style="margin-top:10px;display:flex;gap:12px;align-items:center;flex-wrap:wrap">
              <div>
                <div class="small">Ticket price</div>
                <div id="ticketPrice" style="font-weight:800;font-size:1.1rem">—</div>
              </div>

              <div class="qty" style="margin-left:10px">
                <div class="small">Quantity</div>
                <div style="display:flex;align-items:center;gap:6px;margin-left:6px">
                  <button onclick="changeQty(-1)">−</button>
                  <div id="qty" style="min-width:28px;text-align:center">1</div>
                  <button onclick="changeQty(1)">+</button>
                </div>
              </div>

              <div class="price" id="totalPrice">—</div>
            </div>

            <div class="small" style="margin-top:12px">Select payment</div>
            <div class="payment-methods" id="paymentMethods">
              <div class="payment-method" onclick="selectPayment(this)">Credit Card</div>
              <div class="payment-method" onclick="selectPayment(this)">Khalti</div>
              <div class="payment-method" onclick="selectPayment(this)">PayPal</div>
            </div>

            <div style="display:flex;gap:10px;margin-top:12px;flex-wrap:wrap">
              <button class="btn btn-primary" onclick="buyNow()" id="buyNowBtn">Buy Now</button>
              <button class="btn btn-ghost" onclick="addToCart()" id="addCartBtn">Add to Cart</button>
            </div>
          </div>

          <div style="margin-top:18px">
            <h4 style="margin:0 0 10px 0;color:var(--primary-700)">Transport</h4>
            <div class="transport-options" id="transportOptions">
              <button class="btn btn-ghost transport-btn" onclick="selectTransport('bus')">Bus</button>
              <button class="btn btn-ghost transport-btn" onclick="selectTransport('airlines')">Airlines</button>
            </div>
            <div class="transport-details" id="transportDetails" style="display:none;">
              <div id="busSection" style="display:none;">
                <h5 style="margin:10px 0;color:var(--primary-700)">Top Bus Companies</h5>
                <div class="bus-list" id="busList"></div>
              </div>
              <div id="airplaneSection" style="display:none;">
                <h5 style="margin:10px 0;color:var(--primary-700)">Airlines Tickets</h5>
                <div class="airlines-booking" id="airlinesBooking"></div>
              </div>
            </div>
          </div>

        </div>

        <aside>
          <div class="widget" style="margin-bottom:12px">
            <h4>Map</h4>
            <div id="map" class="map"></div>
            <div class="actions" style="margin-top:10px;display:flex;gap:8px">
              <button class="btn btn-ghost" id="openMaps">Open in Google Maps</button>
              <button class="btn btn-ghost" id="directionsBtn">Directions</button>
            </div>
          </div>

          <div class="widget">
            <h4>Weather</h4>
            <div class="weather">
              <div class="temp" id="weatherTemp">—</div>
              <div class="meta" id="weatherDesc">Loading...</div>
            </div>
            <div class="small" id="weatherExtra"></div>
            <div style="margin-top:8px; font-size:0.9rem; color:var(--muted)">
              <div id="weatherFeels">Feels like: —</div>
              <div id="weatherHumidity">Humidity: —</div>
              <div id="weatherPressure">Pressure: —</div>
              <div id="weatherUV">UV Index: —</div>
            </div>
          </div>

          <div class="widget">
            <h4>Quick Info</h4>
            <div style="display:flex;flex-direction:column;gap:8px;margin-top:8px">
              <div><strong>Opening hours:</strong> <span id="hours">—</span></div>
              <div><strong>Recommended visit:</strong> <span id="recommended">—</span></div>
              <div><strong>Distance from Kathmandu:</strong> <span id="distance">—</span></div>
            </div>
          </div>

          <div class="widget">
            <h4>Rate this Heritage</h4>
            <div class="rating-stars" id="heritageStars" role="radiogroup" aria-label="Rate heritage">
              <button class="rating-star unfilled" data-value="1" aria-label="1 star">★</button>
              <button class="rating-star unfilled" data-value="2" aria-label="2 stars">★</button>
              <button class="rating-star unfilled" data-value="3" aria-label="3 stars">★</button>
              <button class="rating-star unfilled" data-value="4" aria-label="4 stars">★</button>
              <button class="rating-star unfilled" data-value="5" aria-label="5 stars">★</button>
            </div>
            <div style="margin-top:8px; font-size:0.9rem; color:var(--muted)">
              <span id="heritageAvg">—</span> (<span id="heritageCount">0</span> ratings)
            </div>
          </div>
        </aside>
      </div>
    </section>

  </main>

  <footer style="text-align:center;padding:36px 20px;background:linear-gradient(90deg,var(--primary),var(--primary-700));color:#fff;margin-top:40px">
    <div class="container">
      <strong>GoNepal</strong> — Heritage Tickets • © <span id="year"></span>
    </div>
  </footer>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="heritages.js"></script>
</body>
</html>